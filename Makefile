#-----------------------------------------------------------------------
# Configuration
#-----------------------------------------------------------------------
VPATH    := source
CXX      := cl.exe
CXXFLAGS := /experimental:module \
            /std:c++latest       \
            /nologo              \
            /EHsc                \
            /MD


#-----------------------------------------------------------------------
# Word Lists
#-----------------------------------------------------------------------
MODULES := euler


#-----------------------------------------------------------------------
# Targets
#-----------------------------------------------------------------------
.PHONY: clean
clean:
	rm -rf obj

.PHONY: modules
modules: $(addprefix obj/, $(addsuffix .ifc, $(MODULES)))


#-----------------------------------------------------------------------
# Build Rules
#-----------------------------------------------------------------------
obj/%.ifc: %.ixx | obj
	$(CXX) $(CPPFLAGS) $(CXXFLAGS) /Fo./obj/ /module:output $@ -c $< >/dev/null

obj:
	mkdir -p obj
